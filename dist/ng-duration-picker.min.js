"use strict";!function(){function n(n){var e=15,t=230,i=200,a=n.getBoundingClientRect(),r=a.height,l=a.width,s=a.top,o=a.left,c=window.innerHeight,u=s>c/2;s=u?-(e+i):e+r;var g=o+l/2,d=g>t/2&&g<=document.body.clientWidth-t/2,p=g>document.body.clientWidth-t/2;return o=d?l/2-t/2:p?l-t:0,{top:s,left:o}}function e(){var e={restrict:"A",scope:{result:"=",human:"=",output:"@",lang:"@"},link:function(e,t,i){function a(i){e.$apply(function(){if("click"===i.type&&(e.ui.visible=!e.ui.visible),e.ui.visible){var a=n(t[0]),r=a.top,l=a.left;e.ui.pos={top:r,left:l}}})}e.lazy=i.hasOwnProperty("lazy"),angular.element(t).wrap('<div class="ngdp-wrapper"></div>'),e.insertPicker(),angular.element(t).on("click",function(n){return a(n)}),angular.element(window).on("scroll",function(n){return a(n)})},controller:["$scope","$compile",function(n,e){n.ui={visible:!1,open:!0,dirty:!1,error:!1,pos:{top:0,left:0},lang:n.lang||"es"},n.insertPicker=function(){var i=e(t)(n),a=document.getElementsByClassName("ngdp-wrapper");angular.element(a).prepend(i)},n.toggleNav=function(e){n.ui.error||(n.ui.open=!n.ui.open,e.preventDefault())},n.category="minutes",n.categories=["milliseconds","seconds","minutes","hours","days","weeks","months","years"],n.log={},n.categories.forEach(function(e){return n.log[e]=0}),n.preview={result:0,human:"nothing selected yet ..."},n.output?n.customOutput=n.categories.indexOf(n.output)===-1?"minutes":n.output:n.customOutput="minutes",n.changeCategory=function(e,t){if(t&&t.preventDefault(),!n.ui.error){if(e.indexOf("limit")!==-1)return!1;n.category=e,n.value=n.log[e],n.ui.open=!1,n.ui.dirty=!0;var i=n.categories.indexOf(e);n.next=n.categories[i+1]||"reached limit",n.previous=n.categories[i-1]||"reached limit"}},n.updatePreview=function(){function e(){var e=[];return n.categories.forEach(function(t){var i=n.log[t];i&&(1===i&&(t=t.substring(0,t.length-1)),e.push(i+" "+t))}),e.reverse().join(" ")}var t=moment.duration(n.log);n.preview.human=n.lazy?t.humanize():e(),n.preview.human||(n.preview.human="nothing selected yet ..."),n.preview.result=t.as(n.customOutput)},n.updateValue=function(e,t){t&&t.preventDefault(),n.ui.error||(n.value=e?++n.log[n.category]:n.value&&--n.log[n.category],n.updatePreview())},n.changeInput=function(){var e=Number(n.value);return Number.isNaN(e)||e<0?(n.ui.error=!0,void(n.preview.human="wrong input")):(n.ui.error=!1,n.log[n.category]=n.value,void n.updatePreview())},n.bindToExternalModel=function(){n.ui.error||(n.human=n.preview.human,n.result=n.preview.result,n.ui.visible=!1)}}]};return e}var t='<div class="ngdp" style="top: {{ui.pos.top}}px; left: {{ui.pos.left}}px" \n      ng-class="{\'ngdp-visible\': ui.visible, \'ngdp-open\': ui.open, \'ngdp-dirty\': ui.dirty}">\n\n        <div class="ngdp-content">\n          <div class="ngdp-top">\n            <div class="ngdp-change">\n              <a href="#" ng-click="changeCategory(next, $event)" \n                 ng-class="{\'text-muted\': next.indexOf(\'limit\') !== -1}"> {{next}} </a>\n            </div>\n            <div class="ngdp-toggle" ng-click="toggleNav($event)">\n              <i class="ngdp-bar"> </i>\n              <i class="ngdp-bar"> </i>\n              <i class="ngdp-bar"> </i>\n            </div>\n          </div>    \n          <div class="ngdp-middle">\n            <div class="col-xs-12">\n              <div class="ngdp-updown col-xs-5 text-center">\n                <a href="#" ng-click="updateValue(true, $event)">\n                  <span class="glyphicon glyphicon-plus"></span>\n                </a>\n                <input type="text" class="form-control" ng-model="value" \n                       ng-change="changeInput()" ng-class="{\'ngdp-error\': ui.error}">\n                <a href="#" ng-click="updateValue(false, $event)">\n                  <span class="glyphicon glyphicon-minus"></span>\n                </a>\n              </div>\n              <div class="col-xs-7 text-center">\n                <h4 class="text-muted">{{category}}</h4>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-xs-12 text-center">\n                <small class="text-muted"> {{preview.human}} </small>\n              </div>\n            </div>\n          </div>\n          <div class="ngdp-bottom">\n            <div class="ngdp-change">\n              <a href="#" ng-click="changeCategory(previous, $event)"\n                 ng-class="{\'text-muted\': previous.indexOf(\'limit\') !== -1}"> {{previous}}</a>\n            </div>\n            <div class="ngdp-done" ng-click="bindToExternalModel($event)">\n              <span class="ngdp-check"> </span>\n            </div>\n          </div>\n        </div>\n\n        <div class="ngdp-navigation">\n          <div class="ngdp-back" style="visibility: {{ui.dirty ? \'visible\' : \'hidden\'}}">\n            <a href="#" ng-click="toggleNav($event)">\n              <span class="glyphicon glyphicon-chevron-left"></span>\n              <span>go back </span>\n            </a>\n          </div>\n          <h4>Select a category </h4>\n          <ul class="ngdp-categories">\n            <li class="ngdp-category" ng-repeat="category in categories">\n              <button type="button" class="btn btn-sm" ng-click="changeCategory(category)">{{category}}</button>\n            </li>\n          </ul>\n        </div>\n      </div>';angular.module("ngDurationPicker",[]).directive("ngDurationPicker",e)}();
//# sourceMappingURL=ng-duration-picker.min.js.map
